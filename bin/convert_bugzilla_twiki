#!/usr/bin/env python

import sys


def main():
    if len(sys.argv) != 2:
        print("Error: Incorrect Usage")
        print("Usage: python convert_bugzilla_twiki.py /path/to/bugzilla/file")
        sys.exit(1)

    _, bugzilla = sys.argv

    new_text = []

    with open(bugzilla, 'r') as bug_table:
        for line in bug_table.readlines():
            cols = line.strip().split('\t')
            cols[0] = "[[https://bugzilla.dal.design.ti.com/show_bug.cgi?id={0}][{0}]]".format(cols[0])
            new_text.append("| {} | ".format(" | ".join(cols)))

    with open(bugzilla + ".twiki", 'w') as twiki_table:
        for text in new_text:
            twiki_table.write(text + "\n")


if __name__ == '__main__':
    main()
